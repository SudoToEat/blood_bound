# 鲜血盟约 - 多设备访问指南

## 功能概述

鲜血盟约网页版现已支持多设备访问功能，让每个玩家可以通过自己的手机查看自己的身份和阵营，无需传递设备或暴露自己的身份信息。

## 使用流程

### 主持人（房主）操作流程

1. 在主设备（如电脑或平板）上打开游戏
2. 选择玩家人数（6-12人）
3. 点击"下一步：创建房间"按钮
4. 在房间设置页面，点击"创建房间"按钮
5. 系统会生成一个6位数的房间号和每个玩家的访问链接/二维码
6. 让每位玩家通过以下方式之一访问自己的身份：
   - 扫描对应的二维码
   - 点击"复制链接"按钮，将链接发送给对应玩家
7. 确认所有玩家都已查看自己的身份后，点击"开始游戏"按钮

### 玩家操作流程

1. 通过主持人提供的链接或扫描二维码访问游戏
2. 页面会自动显示你的角色身份、阵营和能力说明
3. 游戏过程中保持页面打开，随时查看自己的身份信息

## 测试功能

为了方便测试多设备访问功能，我们提供了一个测试页面：

1. 访问 `[游戏URL]?test=true`
2. 测试页面会自动创建一个6人游戏的房间
3. 点击任意玩家链接，可以在新窗口中查看该玩家的身份

## 注意事项

- 确保所有设备都连接到同一个网络
- 如果使用本地开发服务器，其他设备需要通过局域网IP访问
- 房间信息存储在浏览器本地，刷新页面可能导致数据丢失
- 主持人设备需要保持页面打开，直到游戏结束

## 常见问题解决方案

### "找不到ID为X的玩家" 错误

如果您在访问玩家链接时看到类似 "找不到ID为1的玩家" 的错误，可能是由于以下原因：

- **本地存储数据不同步**：玩家设备上没有正确加载房间数据
- **房间ID不匹配**：链接中的房间ID与创建的房间ID不一致
- **浏览器隐私设置**：某些浏览器的隐私模式或设置可能阻止本地存储的正常使用

#### 解决方法：

1. **重新生成链接**：
   - 主持人重新点击对应玩家的「复制链接」按钮，获取最新链接
   - 将新链接发送给玩家

2. **使用访问代码**：
   - 主持人可以查看并告知玩家其「访问代码」
   - 玩家可以使用访问代码手动输入进入游戏

3. **清除浏览器缓存**：
   - 玩家可以尝试清除浏览器缓存后重新访问链接
   - 或使用不同的浏览器访问链接

4. **确保在同一网络**：
   - 确保所有设备都连接到同一个Wi-Fi网络
   - 避免使用移动数据网络，可能导致连接问题

### 二维码显示问题

如果二维码无法正常显示或扫描失败：

- **刷新页面**：有时候二维码可能未正确加载，刷新页面可能解决问题
- **调整屏幕亮度**：提高屏幕亮度可以提高二维码的可读性
- **使用文本链接**：如果二维码扫描失败，可以使用「复制链接」按钮获取文本链接
- **更新浏览器**：确保使用最新版本的浏览器
- **检查网络连接**：确保网络连接稳定

## 技术说明

多设备访问功能通过以下方式实现：

- 使用URL参数传递房间ID和玩家ID
- 每个玩家有唯一的访问代码
- 使用React Router进行路由管理
- 使用React QR Code生成二维码
- 游戏状态存储在本地存储中，支持页面刷新后恢复